# JBundle configuration file
# https://github.com/ismasan/jbundle

target_dir './dist'
src_dir './lib'

version '0.5.0-coffee'

bundle 'socky.js' do
  license 'socky-licence.js'
  file 'socky.js'
end

bundle 'assets/flashfallback.js' do
  license 'assets/flashfallback-licence.js'
  file 'assets/flashfallback.js'
end

bundle 'assets/json2.js' do
  license 'assets/json2-licence.js'
  file 'assets/json2.js'
end

# Just copy this file across
file 'assets/flashfallback.swf' => 'assets/flashfallback.swf'

# Runs for every bundle and license source.
filter do |src, config|
  src = src.gsub /<VERSION>/, config.version.to_s
  src = src.gsub /<ASSETS_LOCATION>/, 'http://js.socky.org/v0.5-coffee/assets'
end

# some_dependency.js
filter :src do |src, config|
  src.gsub /<DEPENDENCY_SUFFIX>/, ''
end

# some_dependency.min.js
filter :min do |src, config|
  src.gsub /<DEPENDENCY_SUFFIX>/, '.min'
end